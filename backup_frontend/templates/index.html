{% extends 'layout.html' %}
{% block title %}Legal Document Demystifier{% endblock %}
{% block content %}
<div class="page-header">
  <div class="hero-inner">
    <h1 class="gradient-text site-title">Legal Document<br class="title-break"/> Demystifier</h1>
    <p class="subtitle">AI-powered clarity for your legal documents</p>
  </div>
</div>

<section class="card upload-card" aria-labelledby="uploadHeading">
  <div class="card-header">
    <h2 id="uploadHeading">Upload or Paste Document</h2>
    <p class="helper-text">We process your document in-memory only. No storage.</p>
  </div>
  <form id="analyzeForm" class="form-grid" enctype="multipart/form-data" novalidate>
    <div>
      <label class="field-label" for="fileInput">File (PDF / TXT / DOCX)</label>
      <input class="file-input" id="fileInput" name="file" type="file" accept=".pdf,.txt,.doc,.docx" />
      <div class="inline-hint">Optional if you paste text</div>
    </div>
    <div class="full-width">
      <label class="field-label" for="textInput">Or Paste Text</label>
      <textarea id="textInput" name="text" rows="6" placeholder="Paste your legal document here..." aria-describedby="textHelp"></textarea>
      <div id="textHelp" class="inline-hint">We recommend under 10k characters for fastest results.</div>
    </div>
    <div class="triple-grid">
      <div>
        <label class="field-label" for="documentType">Document Type</label>
        <select id="documentType" name="document_type">
          <option value="contract">Contract</option>
          <option value="rental_agreement">Rental Agreement</option>
          <option value="loan_agreement">Loan Agreement</option>
          <option value="terms_of_service">Terms of Service</option>
          <option value="privacy_policy">Privacy Policy</option>
          <option value="employment_contract">Employment Contract</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div>
        <label class="field-label" for="userRole">Your Role</label>
        <select id="userRole" name="user_role">
          <option value="individual">Individual / Consumer</option>
          <option value="business">Small Business Owner</option>
          <option value="tenant">Tenant / Renter</option>
          <option value="borrower">Borrower</option>
          <option value="employee">Employee</option>
        </select>
      </div>
      <div>
        <label class="field-label" for="complexityLevel">Explanation Detail</label>
        <select id="complexityLevel" name="complexity_level">
          <option value="simple">Simple</option>
          <option value="detailed">Detailed</option>
          <option value="expert">Expert</option>
        </select>
      </div>
    </div>
    <div class="actions">
      <button id="analyzeBtn" type="submit" class="btn primary">Analyze Document</button>
      <button id="resetBtn" type="button" class="btn subtle" hidden>Reset</button>
    </div>
  </form>
</section>

<section id="resultsSection" class="card results-card" hidden aria-live="polite"></section>
<section id="qaSection" class="card qa-card" hidden aria-labelledby="qaHeading">
  <div class="card-header">
    <h2 id="qaHeading">Ask Follow-up Questions</h2>
    <p class="helper-text">Clarify clauses, obligations, timelines, or risks.</p>
  </div>
  <form id="questionForm" class="qa-form" novalidate>
    <textarea id="questionInput" rows="3" placeholder="E.g. What happens if I pay late?" required></textarea>
    <div class="actions">
      <button type="submit" class="btn secondary">Get Answer</button>
    </div>
  </form>
  <div id="questionResults" class="qa-results" aria-live="polite"></div>
</section>

<dialog id="loadingDialog">
  <div class="spinner"></div>
  <p id="loadingText">Analyzingâ€¦</p>
</dialog>

{% endblock %}
{% block scripts %}
<script src="/static/js/app.js"></script>
{% endblock %}
